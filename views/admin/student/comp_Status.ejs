<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ITMGravience Portal</title>
    <link rel="stylesheet" href="./css/index.css" />
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-primary">
      <h1 class="text-white mb-2 p-2">ITMGraviencePortal</h1>
      <ul class="navbar-nav mr-auto"></ul>
    </nav>
    <center>
        <% if(msg.length>0){%>
        <div class="alert alert-success m-2 "><%=msg%></div>
  
        <%}%>
      </center>
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
          <div class="container-fluid">
            <div class="row mb-2">
              <div class="col-md-12">
                <h1 class="m-0 text-center m-3">View All Complaint</h1>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <table id="example1" class="table table-bordered table-striped">
              <thead>
                <tr>
                  <th>Id</th>
                  <th>Complaint Title</th>
                  <th>Semester </th>
                  <th>Course</th>
                  <th>Status </th>
                  <th>Message</th>
                  <th>Action</th>
              </thead>
              <tfoot>
                <tbody>
                  <% c.forEach((item)=>{%>
        
                  <tr>
                    <td><%=item._id%></td>
                    <td><%=item.comptitle%></td>
                    <td><%=item.semester%></td>
                    <td><%=item.course%></td>
                    <td class="bg-secondary"><%=item.status%></td>
                    <td><%=item.comment%></td>
                    <td>
                      <a href="/complaint/view/<%=item._id%>" class="btn btn-info"><i class="fa-solid fa-eye"></i></a>
                    </form>
                    </td>
                  </tr>
                  <% })%>
                </tbody>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
    <div class="container-fluid mt-4" style="background-color: aliceblue">
      <div class="row">
        <div class="col-md-4 mb-4">
          <div class="card mb-4 mt-4">
            <h1 class="ms-3">Post A Grievance</h1>
            <h5 class="ms-3">Having Some issue?? Load a new Complained.</h5>

            <button
              type="button"
              class="btn btn-primary ml-2"
              data-toggle="modal"
              data-target="#ComplaintReg"
            >
             Re Complaint Register
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Com.register -->
    <div
      class="modal fade"
      id="ComplaintReg"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Complaint</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>  
            </button>
          </div>
          <div class="modal-body">
            <form
              action="/complaintInsert"
              method="post"
              enctype="multipart/form-data"
            >
              <div class="form-group">
                <label for="comptitle"> Complaint Title</label>
                <input
                  type=" text"
                  name="comptitle"
                  class="form-control"
                  id="compTitle"
                  required
                />
              </div>

              <div class="form-group">
                <label for="semester"> Semester</label>
                <input
                  type="text"
                  name="semester"
                  class="form-control"
                  id="semester"
                  value="<%=semester%>"
                  readonly
                />
              </div>

              <div class="form-group">
                <label for="course">Course</label>
                <input
                  type="text"
                  name="course"
                  class="form-control"
                  id="course"
                  value="<%=course%>"
                  readonly
                />
              </div>
              <div class="form-group">
                <label for="rollnumber">Roll Number</label>
                <input
                  type="number"
                  name="rollnumber"
                  class="form-control"
                  id="rollnumber"
                  value="<%=rollnumber%>"
                  readonly
                />
              </div>
              <div class="form-group">
                <label for="complaint">Complaint</label>
                <textarea
                  name="complaint"
                  class="form-control"
                  required
                ></textarea>
              </div>
              <div class="form-group">
                <label for="image">Image</label>
                <input
                  type="file"
                  name="image"
                  class="form-control"
                  id="image"
                />
              </div>
              <div class="form-group">
                <button type="submit" class="btn btn-success mt-3">
                  Registered
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
</html>
