<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ITMGravience Portal</title>
    <link rel="stylesheet" href="./css/index.css" />
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      .profile-section {
        margin: 20px;
      }
      .profile-image {
        width: 100px;
        height: 100px;
      }
      .profile-info {
        margin-left: 20px;
      }
      #watch {
        width: 200px;
        height: 200px;
        background-color: #333;
        color: #fff;
        display: flex;
        border-radius: 50%;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-size: 24px;
        font-family: Arial, sans-serif;
        position: relative;
        top: 1.5cm;
        left: 2cm;
      }

      .pin {
        position: absolute;
        background-color: #fff;
        transform-origin: bottom center;
        left: calc(50% - 2px);
      }

      .pin-hour {
        top: 60px;
        height: 39.7px;
        width: 3px;
      }

      .pin-minute {
        top: 35px;
        background-color: rgb(13, 249, 9);
        height: 60px;
        width: 2px;
      }

      .pin-second {
        top: 20px;
        background-color: red;
        height: 80px;
        width: 1px;
      }
      .circle {
        background-color: rgb(253, 253, 3);
        border-radius: 50%;
        width: 13px;
        height: 13px;
        position: absolute;
        bottom: 105px;
        right: 95px;
      }

      .time {
        margin-top: 40%;
      }
      .clock {
        width: 200px;
        height: 200px;
        background-color: #e2dcdc;
        color: #0f0f0f;
        display: flex;
        border-radius: 50%;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-size: 15px;
        font-family: Arial, sans-serif;
        position: relative;
      }
      .clock-numbers {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 17px;
        font-weight: bold;
      }
      .clock-numbers span {
        position: absolute;
        top: 0;
        left: 0;
        transform: translate(-50%, -50%);
      }
      .clock-numbers span:nth-child(1) {
        transform: rotate(0deg) translate(40px, -80px);
      }
      .clock-numbers span:nth-child(2) {
        transform: rotate(0deg) translate(75px, -55px);
      }
      .clock-numbers span:nth-child(3) {
        transform: rotate(0deg) translate(90px, -10px);
      }
      .clock-numbers span:nth-child(4) {
        transform: rotate(0deg) translate(85px, 35px);
      }
      .clock-numbers span:nth-child(5) {
        transform: rotate(360deg) translate(50px, 75px);
      }
      .clock-numbers span:nth-child(6) {
        transform: rotate(0deg) translate(0px, 90px);
      }
      .clock-numbers span:nth-child(7) {
        transform: rotate(0deg) translate(-40px, 75px);
      }
      .clock-numbers span:nth-child(8) {
        transform: rotate(150deg) translate(90px, -10px);
      }
      .clock-numbers span:nth-child(9) {
        transform: rotate(0deg) translate(-90px, 10px);
      }
      .clock-numbers span:nth-child(10) {
        transform: rotate(300deg) translate(-10px, -90px);
      }
      .clock-numbers span:nth-child(11) {
        transform: rotate(330deg) translate(-10px, -90px);
      }
      .clock-numbers span:nth-child(12) {
        transform: rotate(360deg) translate(-10px, -90px);
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-primary">
      <h1 class="text-white mb-2 p-2">ITMGraviencePortal</h1>
      <ul class="navbar-nav mr-auto"></ul>
      <a href="/logout" class="btn btn-danger ml-5">Logout</a>
    </nav>
    <center>
      <% if(msg.length>0){%>
      <div class="alert alert-success m-2 "><%=msg%></div>

      <%}%>
    </center>
    <div class="container-fluid">
      <div class="row">
        <div class="col-12 col-md-4 mt-5">
          <div class="card">
            <div class="text-center rounded-circle mt-5">
              <img
                src="<%=image.url %>"
                alt=""
                width="150px"
                style="border-radius: 50%"
              />
            </div>
            <div></div>
            <div class="text-center mb-3">
              <h1>Student Profile Info</h1>
              <h2><i class="fa-solid fa-user"></i>Hello <%=name %></h2>
              <h3><i class="fa-solid fa-envelope">&nbsp;</i><%= email %></h3>
              <h4>Roll Number: <%= rollnumber %></h4>
              <h5><i class="fa-solid fa-phone">&nbsp;</i>: <%= phone %></h5>
              <div class="social-icons">
                <a href="#"><i class="fab fa-linkedin"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-github"></i></a>
              </div>
              <div>
                <button
                  type="button"
                  class="btn btn-primary"
                  data-toggle="modal"
                  data-target="#UpdateProfile"
                >
                  Update Profile
                </button>
              </div>
              <br />
              <div>
                <button
                  type="button"
                  class="btn btn-primary"
                  data-toggle="modal"
                  data-target="#UpdatePassword"
                >
                  Update Password
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-8">
          <div class="row">
            <div class="col-12 card mt-5" style="background-color: gray">
              <h1 class="m-5 pl-2">Hello <%=name %></h1>
              <div class="text-center" id="watch">
                <div class="pin pin-hour"></div>
                <div class="pin pin-minute"></div>
                <div class="pin pin-second"></div>
                <div class="circle clock-numbers">
                  <span>1</span>
                  <span>2</span>
                  <span>3</span>
                  <span>4</span>
                  <span>5</span>
                  <span>6</span>
                  <span>7</span>
                  <span>8</span>
                  <span>9</span>
                  <span>10</span>
                  <span>11</span>
                  <span>12</span>
                </div>
                <div class="time">
                  <span id="hours"></span>: <span id="minutes"></span>:
                  <span id="seconds"></span>
                </div>
              </div>
              <div
                class="card col-md-3 bg-white m-5"
                style="position: relative; left: 12cm; bottom: 5cm"
              >
                <h3>Notifications</h3>
                <p>View the notifications from grievance cell.</p>
                <button class="btn btn-info">See Notifications</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid mt-4" style="background-color: aliceblue">
      <div class="row">
        <div class="col-md-4 mb-4">
          <div class="card mb-4 mt-4">
            <h1 class="ms-3">Post A Grievance</h1>
            <h5 class="ms-3">Having Some issue?? Load a new Complained.</h5>

            <button
              type="button"
              class="btn btn-primary ml-2"
              data-toggle="modal"
              data-target="#ComplaintReg"
            >
              Complaint Register
            </button>
          </div>
        </div>
        <div class="col-md-4 mb-4">
          <div class="card mb-4 mt-4">
            <h1 class="ms-3">Notification</h1>
            <h5 class="ms-3">View all the notification From grievance cell</h5>

            <button
              class="btn btn-lg btn-success mb-3"
              data-bs-toggle="modal"
              data-bs-target="#Complaint"
            >
              View
            </button>
          </div>
        </div>
        <div class="col-md-4 mb-4">
          <div class="card mb-4 mt-4">
            <h1 class="ms-3">View Status</h1>
            <h5 class="ms-3">
              view Student of the grievance/complaint present by you.
            </h5>

            <a href="/admin/student/comp_Status"
              class="btn btn-lg btn-primary mb-3"
            >Status Complaint</a>
            
          </div>
        </div>
      </div>
    </div>

    <!-- Update profile -->.
    <div
      class="modal fade"
      id="UpdateProfile"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Update Profile</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form
              action="/updateProfile"
              method="post"
              enctype="multipart/form-data"
            >
              <div class="form-group">
                <label for="newName">New Name</label>
                <input
                  type="text"
                  name="name"
                  value="<%=name%>"
                  class="form-control"
                  id="newName"
                  placeholder="Enter your new name"
                  required
                />
              </div>

              <div class="form-group">
                <label for="Email">Email</label>
                <input
                  type="email"
                  name="email"
                  value="<%=email%>"
                  class="form-control"
                  id="email"
                  placeholder="Enter your email"
                  required
                />
              </div>
              <div class="form-group">
                <label for="RollNumber">Roll Number</label>
                <input
                  type="number"
                  name="rollnumber"
                  value="<%=rollnumber%>"
                  class="form-control"
                  id="rollnumber"
                  readonly
                />
              </div>
              <div class="form-group">
                <label for="Course">Course</label>
                <input
                  type="text"
                  name="course"
                  value="<%=course%>"
                  class="form-control"
                  id="course"
                  readonly
                />
              </div>
              <div class="form-group">
                <label for="Semester">Semester</label>
                <input
                  type="text"
                  name="semester"
                  value="<%=semester%>"
                  class="form-control"
                  id="semester"
                  readonly
                />
              </div>

              <div class="form-group">
                <label for="profileImage">Profile Image</label>
                <input
                  type="file"
                  name="image"
                  class="form-control-file"
                  id="profileImage"
                />
                <img src="<%=image.url%>" alt="" width="80" />
              </div>

              <button type="submit" class="btn btn-success btn-block mt-5">
                Save Changes
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Update password -->
    <div
      class="modal fade"
      id="UpdatePassword"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Update Password</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form action="/updatePassword" method="post">
              <div class="form-group">
                <label for="oldPassword">Old Password</label>
                <input
                  type="password"
                  name="oldpassword"
                  class="form-control"
                  id="oldPassword"
                  required
                />
              </div>

              <div class="form-group">
                <label for="np">New Password</label>
                <input
                  type="password"
                  name="newpassword"
                  class="form-control"
                  id="newPassword"
                  required
                />
              </div>

              <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input
                  type="password"
                  name="confirmpassword"
                  class="form-control"
                  id="confirmPassword"
                  required
                />
              </div>
              <div class="form-group">
                <button type="submit" class="btn btn-success mt-3">
                  Change Password
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Com.register -->
    <div
      class="modal fade"
      id="ComplaintReg"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Complaint</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>  
            </button>
          </div>
          <div class="modal-body">
            <form
              action="/complaintInsert"
              method="post"
              enctype="multipart/form-data"
            >
              <div class="form-group">
                <label for="comptitle"> Complaint Title</label>
                <input
                  type=" text"
                  name="comptitle"
                  class="form-control"
                  id="compTitle"
                  required
                />
              </div>

              <div class="form-group">
                <label for="semester"> Semester</label>
                <input
                  type="text"
                  name="semester"
                  class="form-control"
                  id="semester"
                  value="<%=semester%>"
                  readonly
                />
              </div>

              <div class="form-group">
                <label for="course">Course</label>
                <input
                  type="text"
                  name="course"
                  class="form-control"
                  id="course"
                  value="<%=course%>"
                  readonly
                />
              </div>
              <div class="form-group">
                <label for="rollnumber">Roll Number</label>
                <input
                  type="number"
                  name="rollnumber"
                  class="form-control"
                  id="rollnumber"
                  value="<%=rollnumber%>"
                  readonly
                />
              </div>
              <div class="form-group">
                <label for="complaint">Complaint</label>
                <textarea
                  name="complaint"
                  class="form-control"
                  required
                ></textarea>
              </div>
              <div class="form-group">
                <label for="image">Image</label>
                <input
                  type="file"
                  name="image"
                  class="form-control"
                  id="image"
                />
              </div>
              <div class="form-group">
                <button type="submit" class="btn btn-success mt-3">
                  Registered
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <script>
      function updateTime() {
        var now = new Date();
        var hours = now.getHours().toString().padStart(2, "0");
        var minutes = now.getMinutes().toString().padStart(2, "0");
        var seconds = now.getSeconds().toString().padStart(2, "0");
        var hourRotation = (hours % 12) * 30;
        var minuteRotation = minutes * 6;
        var secondRotation = seconds * 6;

        document.getElementById("hours").textContent = hours;
        document.getElementById("minutes").textContent = minutes;
        document.getElementById("seconds").textContent = seconds;

        document.querySelector(
          ".pin-hour"
        ).style.transform = `rotate(${hourRotation}deg)`;
        document.querySelector(
          ".pin-minute"
        ).style.transform = `rotate(${minuteRotation}deg)`;
        document.querySelector(
          ".pin-second"
        ).style.transform = `rotate(${secondRotation}deg)`;
      }

      setInterval(updateTime, 1000);
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
</html>
